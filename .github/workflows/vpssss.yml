name: Ubuntu VPS via Serveo

on: [workflow_dispatch]

jobs:
  ubuntu-vps:
    runs-on: ubuntu-latest

    steps:
      - name: إعداد SSH وتغيير الباسورد
        run: |
          sudo apt update
          sudo apt install -y openssh-server curl
          sudo systemctl enable ssh
          sudo systemctl start ssh
          echo "root:Vbnb123@" | sudo chpasswd
          sudo sed -i 's/#PermitRootLogin prohibit-password/PermitRootLogin yes/' /etc/ssh/sshd_config
          sudo systemctl restart ssh

      - name: فتح بورت SSH باستخدام Serveo
        run: |
          echo "✅ فتح الاتصال على subdomain ثابت..."
          ssh -o StrictHostKeyChecking=no -R bassamserveo:22:localhost:22 serveo.net &
          sleep 10
          echo "✅ انسخ الأمر التالي للدخول على الـ VPS:"
          echo "ssh root@bassamserveo.serveo.net -p 22"
          echo
          echo "🧑‍💻 Username: root"
          echo "🔐 Password: Vbnb123@"
          echo "📌 الجلسة شغالة لمدة 6 ساعات أو لحد ما توقف الـ workflow"
